ğŸ“‹ NPM Scripts èªªæ˜æ–‡ä»¶

æœ¬æ–‡ä»¶è©³ç´°èªªæ˜ package.json ä¸­æ¯å€‹ script çš„åŠŸèƒ½èˆ‡ç”¨é€”ã€‚

================================================================================

ğŸ”§ å¯ç”¨çš„ Scripts

ğŸ†˜ å¿«é€Ÿå¹«åŠ©æŒ‡ä»¤

ğŸ“– npm run help
   â”œâ”€ é¡¯ç¤º SCRIPTS.md æ–‡ä»¶çš„å®Œæ•´å…§å®¹
   â”œâ”€ æä¾›å®Œæ•´çš„ä½¿ç”¨æŒ‡å—å’Œç¯„ä¾‹
   â””â”€ é©åˆè©³ç´°äº†è§£æ‰€æœ‰æŒ‡ä»¤åŠŸèƒ½

ğŸ› ï¸ ä¸»è¦é–‹ç™¼æŒ‡ä»¤

ğŸ§ª npm test
   â”œâ”€ åŸ·è¡Œ Jest æ¸¬è©¦å¥—ä»¶
   â”œâ”€ ä½¿ç”¨ jest.config.cjs é…ç½®æª”æ¡ˆ
   â”œâ”€ --runInBand åƒæ•¸ç¢ºä¿æ¸¬è©¦æŒ‰é †åºåŸ·è¡Œï¼Œé¿å…ä¸¦ç™¼å•é¡Œ
   â””â”€ é©ç”¨æ–¼å–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦

ğŸ§¹ npm run clean
   â”œâ”€ æ¸…ç†å»ºç½®ç›®éŒ„
   â”œâ”€ åˆªé™¤æ ¹ç›®éŒ„ä¸‹çš„ ../../dist è³‡æ–™å¤¾
   â”œâ”€ åˆªé™¤ç•¶å‰ç›®éŒ„ä¸‹çš„ dist_ts è³‡æ–™å¤¾
   â”œâ”€ é‡æ–°å»ºç«‹ç©ºçš„ dist_ts ç›®éŒ„
   â””â”€ ç”¨æ–¼ç¢ºä¿ä¹¾æ·¨çš„å»ºç½®ç’°å¢ƒ

âš™ï¸ npm run inject:config
   â”œâ”€ æ³¨å…¥é…ç½®è¨­å®š
   â”œâ”€ åŸ·è¡Œ config/inject-config.mjs è…³æœ¬
   â”œâ”€ å°‡é…ç½®åƒæ•¸æ³¨å…¥åˆ°ç¨‹å¼ç¢¼ä¸­
   â””â”€ é€šå¸¸åœ¨å»ºç½®å‰åŸ·è¡Œï¼Œç”¨æ–¼ç’°å¢ƒç‰¹å®šçš„è¨­å®š

ğŸ”¨ npm run ts:build
   â”œâ”€ ç·¨è­¯ TypeScript ç¨‹å¼ç¢¼
   â”œâ”€ ä½¿ç”¨ config/tsconfig.json é…ç½®æª”æ¡ˆ
   â”œâ”€ --noEmitOnError åƒæ•¸ç¢ºä¿æœ‰éŒ¯èª¤æ™‚ä¸ç”Ÿæˆæª”æ¡ˆ
   â””â”€ ç·¨è­¯çµæœè¼¸å‡ºåˆ° dist_ts ç›®éŒ„

ğŸ“ npm run copy:static
   â”œâ”€ è¤‡è£½éœæ…‹æª”æ¡ˆåˆ°æœ€çµ‚éƒ¨ç½²ç›®éŒ„
   â”œâ”€ å»ºç«‹ ../../dist/extension ç›®éŒ„
   â”œâ”€ è¤‡è£½ç·¨è­¯å¾Œçš„ TypeScript æª”æ¡ˆï¼ˆå¾ dist_tsï¼‰
   â”œâ”€ è¤‡è£½ manifest.jsonã€assetsã€vendorã€README.md
   â”œâ”€ è¤‡è£½ UI æª”æ¡ˆï¼špopup.html å’Œ main.cssï¼ˆé‡æ–°å‘½åç‚º styles.cssï¼‰
   â”œâ”€ è¤‡è£½å•Ÿå‹•è…³æœ¬ï¼špopup.bootstrap.mjs
   â”œâ”€ æ¢ä»¶è¤‡è£½ï¼šåœ°åœ–å„ªåŒ–å™¨å’Œæœå‹™å·¥ä½œè€…æª”æ¡ˆ
   â”œâ”€ è¤‡è£½ Leaflet MarkerCluster ä¾è³´
   â””â”€ æ¸…ç†æ¸¬è©¦æª”æ¡ˆï¼ˆç§»é™¤ __tests__ ç›®éŒ„ï¼‰

ğŸ—ï¸ npm run build â­ (æœ€å¸¸ç”¨)
   â”œâ”€ å®Œæ•´å»ºç½®æµç¨‹ï¼ŒæŒ‰é †åºåŸ·è¡Œï¼š
   â”œâ”€ 1. npm run clean - æ¸…ç†ç›®éŒ„
   â”œâ”€ 2. npm run inject:config - æ³¨å…¥é…ç½®
   â”œâ”€ 3. npm run ts:build - ç·¨è­¯ TypeScript
   â”œâ”€ 4. npm run copy:static - è¤‡è£½éœæ…‹æª”æ¡ˆ
   â””â”€ é€™æ˜¯é–‹ç™¼æ™‚æœ€å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œæœƒç”¢ç”Ÿå®Œæ•´çš„å¯ç”¨æ“´å……åŠŸèƒ½

ğŸ“¦ npm run zip
   â”œâ”€ å»ºç½®ä¸¦æ‰“åŒ…æˆ ZIP æª”æ¡ˆ
   â”œâ”€ å…ˆåŸ·è¡Œå®Œæ•´å»ºç½®æµç¨‹
   â”œâ”€ å°‡ ../../dist/extension ç›®éŒ„æ‰“åŒ…æˆ extension.zip
   â””â”€ é©ç”¨æ–¼æº–å‚™ä¸Šå‚³åˆ° Chrome Web Store

ğŸš€ npm run package
   â”œâ”€ å®Œæ•´æ‰“åŒ…æµç¨‹çš„åˆ¥å
   â”œâ”€ ç­‰åŒæ–¼ npm run zip
   â””â”€ æä¾›æ›´èªç¾©åŒ–çš„æŒ‡ä»¤åç¨±

================================================================================

ğŸ’¡ ä½¿ç”¨å ´æ™¯

ğŸ“š æŸ¥çœ‹èªªæ˜

   npm run help          # æŸ¥çœ‹å®Œæ•´æ–‡ä»¶å…§å®¹

ğŸ”§ é–‹ç™¼éšæ®µ

   npm run build    # å»ºç½®é–‹ç™¼ç‰ˆæœ¬
   npm test         # åŸ·è¡Œæ¸¬è©¦

ğŸš€ éƒ¨ç½²æº–å‚™

   npm run package  # å»ºç½®ä¸¦æ‰“åŒ…ç™¼å¸ƒç‰ˆæœ¬

ğŸ› é™¤éŒ¯æ™‚

   npm run clean    # æ¸…ç†å¾Œé‡æ–°å»ºç½®
   npm run build

================================================================================

ğŸ“‚ æª”æ¡ˆçµæ§‹èªªæ˜

å»ºç½®å®Œæˆå¾Œï¼Œæª”æ¡ˆæœƒè¢«è¤‡è£½åˆ°ä»¥ä¸‹çµæ§‹ï¼š

../../dist/extension/
â”œâ”€â”€ manifest.json           # æ“´å……åŠŸèƒ½é…ç½®
â”œâ”€â”€ popup.html             # å½ˆå‡ºè¦–çª— UI
â”œâ”€â”€ styles.css             # æ¨£å¼æª”æ¡ˆ
â”œâ”€â”€ popup.bootstrap.mjs    # å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ assets/                # éœæ…‹è³‡æº
â”œâ”€â”€ vendor/                # ç¬¬ä¸‰æ–¹ç¨‹å¼åº«
â”œâ”€â”€ node_modules/          # å¿…è¦çš„ npm ä¾è³´
â””â”€â”€ [ç·¨è­¯å¾Œçš„ JS æª”æ¡ˆ]      # å¾ TypeScript ç·¨è­¯è€Œä¾†

================================================================================
